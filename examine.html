<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Ä°slam Hukuku Seviye Belirleme SÄ±navÄ±</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #27ae60;
            --accent-color: #e67e22;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f9f9f9;
        }

        .card {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin: 20px 0;
        }

        .timer {
            font-size: 1.2em;
            color: var(--accent-color);
            font-weight: bold;
            text-align: right;
        }

        button {
            background: var(--secondary-color);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            transition: transform 0.2s;
            margin: 10px 5px;
        }

        button:disabled {
            background: #95a5a6;
            cursor: not-allowed;
        }

        .question {
            margin: 20px 0;
            padding: 15px;
            border-left: 4px solid var(--primary-color);
        }

        .options label {
            display: block;
            margin: 10px 0;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 8px;
            cursor: pointer;
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <!-- GiriÅŸ EkranÄ± -->
    <div id="startScreen" class="card">
        <h2>Ä°slam Hukuku Seviye Belirleme SÄ±navÄ±</h2>
        <p>ðŸ“š Sorulara verdiÄŸiniz cevaplardan 70 ve Ã¼zeri bir puan alÄ±rsanÄ±z isminize sertifika dÃ¼zenlenecektir.</p>
        <input type="text" id="fullName" placeholder="AdÄ±nÄ±z SoyadÄ±nÄ±z" style="width:100%; padding:10px; margin:15px 0;">
        <button onclick="startExam()">SÄ±nava BaÅŸla</button>
    </div>

    <!-- SÄ±nav EkranÄ± -->
    <div id="examScreen" style="display:none;">
        <div class="timer" id="timer">00:30</div>
        <div id="questions"></div>
        <div class="navigation-buttons">
            <button onclick="finishExam()">SÄ±navÄ± Bitir</button>
            <button id="nextBtn" onclick="nextQuestion()" disabled>Sonraki Soru</button>
        </div>
    </div>

    <!-- SonuÃ§ EkranÄ± -->
    <div id="resultScreen" class="card" style="display:none;">
        <h2>SÄ±nav Sonucunuz</h2>
        <p>DoÄŸru: <span id="correctCount"></span></p>
        <p>YanlÄ±ÅŸ: <span id="wrongCount"></span></p>
        <p>Puan: <span id="totalScore"></span></p>
        <button id="certificateBtn" onclick="generateCertificate()" disabled>Sertifika OluÅŸtur</button>
    </div>

<script>
const questions = [
    {
        question: "Ä°slam hukukunda 'ictihad' ne anlama gelir?",
        options: ["KÄ±yas yapmak", "NasslarÄ± yorumlamak", "Ã–rf ve adetleri dikkate almak", "HÃ¼kÃ¼m Ã§Ä±karma Ã§abasÄ±"],
        correct: 4
    },
    {
        question: "Hanefi mezhebine gÃ¶re vakÄ±f mallarÄ±n satÄ±ÅŸÄ± nasÄ±ldÄ±r?",
        options: ["Caizdir", "Caiz deÄŸildir", "Åžartlara baÄŸlÄ±dÄ±r", "YalnÄ±z devlet izniyle"],
        correct: 1
    },
    {
        question: "Mecelle hangi yÄ±l yÃ¼rÃ¼rlÃ¼ÄŸe girmiÅŸtir?",
        options: ["1876", "1881", "1890", "1900"],
        correct: 1
    }
];

let currentQuestion = 0;
let timeLeft = 30;
let timerId;
let score = 0;
let userName = "";

function startExam() {
    userName = document.getElementById('fullName').value;
    if(!userName) return alert("LÃ¼tfen adÄ±nÄ±zÄ± giriniz");
    document.getElementById('startScreen').style.display = 'none';
    document.getElementById('examScreen').style.display = 'block';
    showQuestion();
    startTimer();
}

function showQuestion() {
    let html = `<div class="card question">
                  <h3>${questions[currentQuestion].question}</h3>
                  <div class="options">`;
    questions[currentQuestion].options.forEach((opt, index) => {
        html += `<label><input type="radio" name="answer" value="${index}"> ${opt}</label>`;
    });
    html += `</div></div>`;
    document.getElementById('questions').innerHTML = html;
    
    // Radio buton dinleyici ekle
    document.querySelectorAll('input[name="answer"]').forEach(radio => {
        radio.addEventListener('change', () => {
            document.getElementById('nextBtn').disabled = false;
        });
    });
}

function startTimer() {
    timerId = setInterval(() => {
        timeLeft--;
        document.getElementById('timer').textContent = `00:${timeLeft.toString().padStart(2,'0')}`;
        if(timeLeft <= 0) nextQuestion();
    }, 1000);
}

function nextQuestion() {
    clearInterval(timerId);
    checkAnswer();
    currentQuestion++;
    timeLeft = 30;
    document.getElementById('nextBtn').disabled = true;
    if(currentQuestion < questions.length) {
        showQuestion();
        startTimer();
    } else {
        finishExam();
    }
}

function checkAnswer() {
    const selected = document.querySelector('input[name="answer"]:checked');
    if(selected && selected.value == questions[currentQuestion].correct) score += 100/questions.length;
}

function finishExam() {
    clearInterval(timerId);
    document.getElementById('examScreen').style.display = 'none';
    document.getElementById('resultScreen').style.display = 'block';
    document.getElementById('correctCount').textContent = Math.round(score/(100/questions.length));
    document.getElementById('wrongCount').textContent = questions.length - Math.round(score/(100/questions.length));
    document.getElementById('totalScore').textContent = Math.round(score);
    if(score >= 70) document.getElementById('certificateBtn').disabled = false;
}

function generateCertificate() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF({
        orientation: 'landscape',
        unit: 'mm',
        format: 'a4'
    });

    // Sertifika tasarÄ±mÄ±
    doc.setFontSize(24);
    doc.setTextColor(40, 40, 40);
    doc.text('Ä°SLAM HUKUKU ARAÅžTIRMALARI PLATFORMU', 105, 30, { align: 'center' });
    
    doc.setFontSize(18);
    doc.text('BaÅŸarÄ± SertifikasÄ±', 105, 45, { align: 'center' });
    
    doc.setFontSize(16);
    doc.text(`Bu sertifika, ${userName} adlÄ± katÄ±lÄ±mcÄ±ya`, 105, 60, { align: 'center' });
    doc.text(`Ä°slam Hukuku Seviye Belirleme SÄ±navÄ±'nda ${Math.round(score)} puan alarak`, 105, 70, { align: 'center' });
    doc.text('baÅŸarÄ±lÄ± olduÄŸu iÃ§in verilmiÅŸtir.', 105, 80, { align: 'center' });
    
    // Tarih ve imza
    doc.setFontSize(12);
    doc.text(`Sertifika No: ${Math.floor(Math.random()*90000)+10000}`, 20, 110);
    doc.text(new Date().toLocaleDateString('tr-TR'), 160, 110);
    
    // Ã‡erÃ§ve
    doc.setLineWidth(0.5);
    doc.rect(10, 10, 277, 190);
    
    doc.save(`${userName}_Sertifika.pdf`);
}
</script>
</body>
</html>
